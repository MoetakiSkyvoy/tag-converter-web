# Tag格式转换器

一个智能的网页工具，支持Danbooru和Gelbooru两种格式的tag文本转换，将带权重的tag转换为纯净的逗号分隔格式。

## 支持格式

### Danbooru格式
```
General
?
1boy 1.4M
?
1girl 6.1M
```

### Gelbooru格式
```
Artist? tumitumico 18Character? queen marika the eternal 569Tag? 1girl 8032396? armlet 51903
```

## 功能特点

- 🔄 **实时转换**: 输入文本后自动处理转换
- 🎯 **双格式支持**: 自动识别Danbooru和Gelbooru两种网站格式
- 🤖 **智能检测**: 根据文本结构自动选择对应的解析算法
- 📊 **权重处理**: 支持去除各种数字权重格式（如 369、3.69k、3M）
- 📋 **一键复制**: 点击复制按钮即可复制结果，带有视觉反馈
- 🔧 **保护括号**: 自动保留tag中的括号内容
- 📱 **响应式设计**: 支持移动端访问

## 转换逻辑

### 统一处理算法
采用全新的三阶段统一处理流程，确保所有格式的准确转换：

1. **格式检测**: 
   - **Danbooru**: 包含换行符 + `?` 标记行
   - **Gelbooru**: 单行文本 + `Artist?`/`Tag?` 等标识符
   - **Standard**: 已经是逗号分隔的标准格式

2. **内容提取**: 
   - **Danbooru**: 提取 `?` 后面的内容行
   - **Gelbooru**: 智能解析分类标识符，提取有效内容，移除数字权重
   - **Standard**: 直接使用原始输入

3. **统一清理**: 
   - 按逗号精确分割，保护词组完整性
   - 移除纯分类标识符
   - 删除末尾数字权重（支持 369、3.69k、3M 等格式）
   - 输出纯净的逗号分隔tag列表

## 使用方法

1. 打开 `index.html` 文件
2. 粘贴来自Danbooru或Gelbooru的原始tag文本
3. 系统自动识别格式并实时转换
4. 点击"复制结果"按钮复制转换后的tag列表

## 技术实现

- 纯HTML/CSS/JavaScript，无需构建工具
- 统一三阶段算法架构，支持多种输入格式
- 智能格式检测和精确内容提取
- 词组完整性保护，避免错误分割
- 使用正则表达式精确匹配和清理
- 实时输入处理和剪贴板API集成

## 算法优势

- **格式兼容**: 自动识别并处理三种不同的输入格式
- **词组保护**: 确保复合词组（如 `dark-skinned female`）不被分割
- **精确清理**: 只移除真正的权重数字，保留有意义内容
- **容错性强**: 对格式变化和边界情况有良好的处理能力